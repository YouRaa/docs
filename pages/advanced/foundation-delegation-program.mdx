import Page from '@reason/pages/Docs';
export default Page({title: "Foundation Delegation Program"});

# Рекомендации по Участию в Программе Делегирования Mina Foundation

Ознакомьтесь с [политикой делегирования Foundation](https://minaprotocol.com/blog/mina-foundation-delegation-policy). В документе содержится подробная информация о том, что нужно сделать, чтобы выплатить вознаграждение, если вам делегируют средства, и как отправить данные о времени безотказной работы, чтобы получить или сохранить право на получение этих вознаграждений. 

Заполните эту [Форму](), если вы хотите иметь право на делегирование в будущем. 

O(1) Labs самостоятельно приняла это руководство при согласовании с Foundation.

Ниже представлены все детали, о которых должны знать блок-продюсеры, чтобы соответствовать требованиям и удовлетворять условиям делегирования от пользователей (назовем их «поставщиками токенов»). 

## Адреса для Выплат

Вы должны отправить вознаграждения, полученные в ходе вычислений, на адреса поставщиков токенов, как описано ниже. Если Foundation делегирует вам токены, то выберет два адреса из списка адресов Foundation в нижней части страницы, которые будут отображаться для вас как делегированные. Вы должны распределить вознаграждения по обоим этим адресам. Если O(1) Labs делегирует вам токены, то выберет два адреса из списка адресов O(1) Labs внизу страницы, которые будут отображаться для вас как делегированные. Вы должны распределить вознаграждения по обоим адресам, делегировавшим вам токены.

## Частота Выплат

Вознаграждения должны распределяться хотя бы один раз в течение данной эпохи (но вы можете отправлять их и чаще), все вознаграждения для эпохи N должны быть доставлены адресатам (т.е. приняты в блоке, а не просто отправлены) не позднее, чем до слота номер 3,500 следующей эпохи. У вас будет около недели на то, чтобы произвести эти платежи.

## Спецификации Вознаграждений

Вы должны отправить **как минимум** сумму, указанную этим механизмом. Если вы отправите больше токенов, вы все равно останетесь правомочным участником, но не получите средства обратно.

В конце каждой эпохи сделайте следующее:

1. Вычислите общую сумму делегированных вашей учетной записи токенов за эту эпоху
2. Вычислите долю поставщика токенов (с обеих учетных записей), разделив сумму, делегированную поставщиками токенов на общую сумму токенов. (например `provider_share = provider_delegation / total_stake`). Результат должен находиться в пределах от 0 до 1.
3. Для каждого блока, созданного в канонической цепи, рассчитайте выплату, умножив неудвоенное вознаграждение (равное 720 MINA при запуске Mainnet) на долю поставщика токенов, рассчитанную на предыдущем шаге, за вычетом комиссии 5%. (т.е. `payout = (provider_share * 0.95) * coinbase`)
4. Отправьте транзакцию на счета поставщика токенов с соответствующей расчетам выплатой. 

Каноническая цепь будет рассчитываться как 12 блоков за любой вершиной слота 3,500 следующей эпохи. 

Блок-продюсер может оставить себе все комиссии за транзакции или разделить их поровну между другими участниками пула. Обратите внимание, что провайдер токенов, Foundation или O(1) ожидают получить только пропорциональную долю вознаграждений *как если бы она не была наградой суперчардж*. Если созданный блок был с удвоенной наградой суперчардж, дополнительные вознаграждения могут быть распределены между остальными участниками пула по вашему усмотрению. См. [https://minaprotocol.com/docs/advanced/staking-service-guidelines](https://minaprotocol.com/docs/advanced/staking-service-guidelines) для получения подробной информации об условиях и инструментах, используемых в этом подходе.

### Пример Выплаты Вознаграждения

Рассмотрим следующие условия:

- Аккаунт A содержит 1 миллион **заблокированных** токенов MINA
- Аккаунты B и C контролируются Mina Foundation и содржат 2 миллиона **заблокированных** MINA каждый. Обе учетные записи делегируют токены Аккаунту A.
- Аккаунт D контролируется третьей стороной и имеет 1 миллион **разблокированных** MINA. Этот аккаунт также делегирует токены Аккаунту A.

In this example, the total amount of stake for Account A is 6 million calculated by adding up the balances from all the accounts. Note that since Account D has all its tokens unlocked, any block rewards won when `winnerAccount` equals Account D will be super-charged. 

Now let's consider Epoch 5. The share of the stake from the Foundation is `4 million MINA / 6 million MINA = 0.6` or 60%. Three blocks are produced this epoch that end up on the canonical chain. 

The first block has a `winnerAccount` equal to Account A. The total Foundation payout for this block is calculated as `(0.6 * 0.95) * 720 MINA = 410.4 MINA`. In the second block the `winnerAccount` is Account B — the total Foundation payout is again calculated as `(0.6 * 0.95) * 720 MINA = 410.4 MINA`. The third and final block has the `winnerAccount` as Account D. Now the actual coinbase is super-charged for this block and will be 1440 MINA, but despite this the Foundation rewards are still `410.4 MINA` since they are calculated using the non-supercharged coinbase. Thus the total payout to the Foundation from all blocks is `410.4 MINA * 3 blocks = 1,231.2 MINA` .

Finally, before slot 3,500 of the next epoch, two payments are made from any account that this block producer controls to each of the Foundation accounts — in the case that the payment comes from an account different from Account A, the one that is receiving the delegation, please include the Discord ID that is registered with the program in the `memo` field of the payment. Each payment is `1231.2 MINA / 2 = 615.6 MINA` tokens. Note that the transaction fees for these two transactions are paid for by the block producer.

The token provider, either the Foundation or O(1) Labs respectively, will check to see that you have sent back with this mechanism by the middle of the next epoch as described above. Failing to do so, can result in ineligibility for receiving delegations.

## Avoiding Rounding Issues

If you have computed a reward that has an odd number of nanomina and need to divide it between the two accounts it is okay to round down and keep the extra 1 nanomina.

## Installing and running the uptime sidecar

When participating in the Foundation Delegation Program you will also need to run the uptime sidecar, so please following [these instructions](/docs/advanced/node-status) and set it up alongside your block producer daemon.

## Addresses for token providers

* [Mina Foundation](/static/Mina_Foundation_Addresses.csv)

* [O(1) Labs](/static/O1_Labs_addresses.csv)


