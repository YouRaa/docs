import Page from "@reason/pages/Docs";
export default Page({ title: "Hard Fork" });

# Хард-Форк

Хард-форк происходит, когда в базовый протокол вносятся серьезные изменения, требующие, чтобы все ноды в сети обновили ПО до последней версии.

## Обзор

Форк в блокчейне происходит, когда меняются правила, определяющие, какие блоки считаются действительными, а какие нет. Есть два типа форков: хард-форки и софт-форки.

Софт-форк возникает, когда новые правила все еще совместимы со старыми. Это означает, что пользователи все еще могут запускать ноду со старой версией ПО и по-прежнему подключаться к сети.

Хард-форк означает, что старая цепь несовместима с новой. Примером хард-форка является сеть Bitcoin Cash, которая использовала исходный блокчейн Bitcoin, а затем отделилась в новую несовместимую сеть. Как видно из этого примера, после хард-форка возможно существование двух цепей. Чтобы избежать разделения цепи, важно, чтобы каждая нода в сети обновляла ПО до последней версии.

## Процесс

Участвовать в хард-форке очень просто. После объявления о хард-форке первым шагом является обновление вашей ноды до последней версии ПО. Затем вам просто нужно будет запустить свою ноду и дождаться, пока настроется время запуска сети. После запланированного времени запуска сети ваша нода синхронизируется с последней версией цепи, будет создан новый блок, и сеть будет продолжать работать, как обычно.

### Обновление вашей ноды

Когда будет объявлен хард-форк, сначала отключите все ваши работающие ноды.

Затем удалите папку `.mina-config`, поскольку форк потребует синхронизации с нуля.

```
rm -rf ~/.mina-config
```

Теперь вы можете следовать инструкциям в [Подключение к Сети](/docs/connecting), чтобы установить последнюю версию daemon.

Как только ваша нода синхронизируется с сетью, все готово. Просто дождитесь объявления времени запуска сети, и ваш узел успешно примет хард-форк!

### Перенос вашей архивной ноды

Если вы используете архивную ноду, вам нужно будет обновить базу данных postgres. Мы приложили автоматизированный скрипт, который выполнит все шаги.

Сначала убедитесь, что ваша архивная нода не запущена. Затем просто загрузите [этот sql-скрипт](https://github.com/MinaProtocol/mina/blob/develop-until-4.1-hardfork/scripts/archive/update_schema.sql) и запустите его в архивной базе данных.


```
wget -O https://github.com/MinaProtocol/mina/blob/develop-until-4.1-hardfork/scripts/archive/update_schema.sql ~/update_schema.sql
psql -d archive -f ~/update_schema.sql
```

Теперь вы можете безопасно запустить последнюю версию архивной ноды.
